#!/usr/bin/env fish

set -l BACKUP "$HOME/backup"

rm -r "$BACKUP"
mkdir "$BACKUP"

pnpm list -g --json | jq -r '.[] | .dependencies | keys | .[]' > "$BACKUP/pnpm.txt"
go run github.com/nao1215/gup@latest list | awk -F '[ @]' '{print $2}' > "$BACKUP/go.txt"
pipx list --json | jq -r '.venvs | keys | .[]' > "$BACKUP/pipx.txt"
cargo install --list | grep ":" | awk '{print $1}' > "$BACKUP/cargo.txt"
asdf list > "$BACKUP/asdf.txt"
# sdk current > "$BACKUP/sdkman.txt"

mkdir "$BACKUP/ssh"
cp -r ~/.ssh/id* "$BACKUP/ssh/"
